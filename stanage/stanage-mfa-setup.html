
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stanage TOTP multifactor authentication setup &mdash; Sheffield HPC Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=0a35405e" />

  
    <link rel="canonical" href="https://docs.hpc.shef.ac.uk/stanage/stanage-mfa-setup.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
        <script src="../_static/design-tabs.js?v=36754332"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using GPUs on Stanage" href="GPUComputingStanage.html" />
    <link rel="prev" title="Slurm Scheduler Job Submission info" href="slurm.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Sheffield HPC Documentation
              <img src="../_static/UOSLogo_Primary_Violet_RGB_small.png" class="logo" alt="Logo"/>
          </a><div>
    <h3>Quick search</h3>
    <!--Setup by JKWM via https://cse.google.com/cse/all-->
    <script async src="https://cse.google.com/cse.js?cx=243e6cd4be08b404b">
    </script>
    <div class="gcse-search"></div>
 </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../hpc/index.html">Using the HPC Systems</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Stanage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="stanage-FAQ-gotchas.html">Stanage FAQ and Gotchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="software/index.html">Software on Stanage</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_specs.html">Stanage Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm.html">Slurm Scheduler Job Submission info</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Stanage TOTP multifactor authentication setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="GPUComputingStanage.html">Using GPUs on Stanage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bessemer/index.html">Bessemer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel/index.html">Parallel Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../newsletter/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary of Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other-uk-hpc-resources.html">Access to External UK HPC Facilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Need help?</a></li>
<li class="toctree-l1"><a class="reference external" href="https://rcgsheffield.github.io/TUoS-RIT-training-resources/training.html">Courses / Training Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheets/index.html">Quick Reference (Cheat Sheets)</a></li>
<li class="toctree-l1"><a class="reference external" href="http://changelog.hpc.shef.ac.uk/">Latest Software / HPC changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../referenceinfo/index.html">Reference Information Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Suggested text for citations and letters of support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../decommissioned/index.html">Decommissioned Clusters</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sheffield HPC Documentation</a>
      </nav>

      <div class="wy-nav-content">
<!-- <a class="forkme" href="https://github.com/rcgsheffield/sheffield_hpc">
<img alt="Fork me on GitHub" src="../_static/img/forkme.png"> 
</a> -->

        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Stanage</a></li>
      <li class="breadcrumb-item active">Stanage TOTP multifactor authentication setup</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="stanage-totp-multifactor-authentication-setup">
<span id="stanage-totp-setup"></span><h1>Stanage TOTP multifactor authentication setup<a class="headerlink" href="#stanage-totp-multifactor-authentication-setup" title="Link to this heading"></a></h1>
<p>To connect without VPN, you must first setup TOTP multifactor authentication on the cluster. To do so you must first connect with the VPN to run the setup steps below (see the other tab).</p>
<p>Log into Stanage and run the following setup steps for TOTP multifactor authentication <span class="underline-bold">on a login node</span>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flight</span> <span class="n">start</span>
<span class="n">flight</span> <span class="n">mfa</span> <span class="n">generate</span>
</pre></div>
</div>
<p>This will generate a QR Code:</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/totp_console_qr_code_mfa-screenshot_1.png"><img alt="Example generated TOTP QR Code." src="../_images/totp_console_qr_code_mfa-screenshot_1.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Example generated TOTP QR Code.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>This can be scanned with your DUO app or any Authenticator app which supports TOTP. We recommend that you use the DUO app and you can scan the QR code via the <strong>“Add”</strong> account and <strong>“Use QR Code”</strong> buttons in the DUO app as shown below:</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/duo_mfa-screenshot_1.png"><img alt="Screenshots of account adding process for the TOTP accounts via QR Code scanning." src="../_images/duo_mfa-screenshot_1.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Screenshots of account adding process for the TOTP accounts via QR Code scanning.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Make sure when adding the new account to the DUO app that you name it sensibly, e.g. ‘Stanage - My Username’.</p>
<p>Now you can disconnect the VPN and connect to Stanage normally.</p>
<p>If you are connecting for the first time on your current device, before you enter any details, you should make sure that the SSH ‘fingerprint’ is correct.
The RSA, ECDSA and ED25519 fingerprints for Stanage’s login nodes are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SHA256</span><span class="p">:</span><span class="n">mFfJmZHH0SUogoUhTtlatoZLEacfGAlj0cTrnInO5z0</span> <span class="p">(</span><span class="n">RSA</span><span class="p">)</span>
<span class="n">SHA256</span><span class="p">:</span><span class="mi">4</span><span class="n">HdvK3C1KDm</span><span class="o">+</span><span class="n">JG1TzxQKxezMz5ojEORynHUqF9tQfoI</span> <span class="p">(</span><span class="n">ECDSA</span><span class="p">)</span>
<span class="n">SHA256</span><span class="p">:</span><span class="n">aaTv</span><span class="o">+</span><span class="mi">0</span><span class="n">TEc0nj7WR2ZuBYWFDD</span><span class="o">+</span><span class="n">QqzOKJpMjEFKBx6pQU</span> <span class="p">(</span><span class="n">ED25519</span><span class="p">)</span>
</pre></div>
</div>
<p>Your SSH client will show one of these fingerprints by default. If any one of these fingerprints matches you should continue.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If none of these fingerprints matches the fingerprint shown in your terminal please
contact the <a class="reference external" href="mailto:research-it&#37;&#52;&#48;sheffield&#46;ac&#46;uk">IT Services’ Research and Innovation team</a> .</p>
</div>
<p>When you connect you will be prompted for your password and a verification code. Enter your password and the current TOTP code for your verification code.
This process should look like the following in a terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ssh test@stanage.shef.ac.uk</span>
<span class="go">Password:</span>
<span class="go">Verification code:</span>
<span class="go">Last login: Wed Apr 12 17:09:24 2023 from r.x.y.z</span>
<span class="go">*****************************************************************************</span>
<span class="go">*                           Stanage HPC cluster                             *</span>
<span class="go">*                       The University Of Sheffield                         *</span>
<span class="go">*                       https://docs.hpc.shef.ac.uk                         *</span>
<span class="go">*                                                                           *</span>
<span class="go">*               Unauthorised use of this system is prohibited.              *</span>
<span class="go">*****************************************************************************</span>
<span class="gp">[test@login1 [stanage] ~]$</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="slurm.html" class="btn btn-neutral float-left" title="Slurm Scheduler Job Submission info" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="GPUComputingStanage.html" class="btn btn-neutral float-right" title="Using GPUs on Stanage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, The University of Sheffield.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<footer class="footer">
  <div class="container">
    <div class="left-footer">
         &copy; 2024, The University of Sheffield
       <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a>
    </div>
   
    <div class="centre-footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7
    </div>
  </div>
</footer>

</body>
</html>