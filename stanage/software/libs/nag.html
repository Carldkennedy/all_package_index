
<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NAG Fortran and C Library &mdash; Sheffield HPC Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=0a35405e" />

  
    <link rel="canonical" href="https://docs.hpc.shef.ac.uk/stanage/software/libs/nag.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="netCDF" href="netcdf.html" />
    <link rel="prev" title="libunistring" href="libunistring.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Sheffield HPC Documentation
              <img src="../../../_static/UOSLogo_Primary_Violet_RGB_small.png" class="logo" alt="Logo"/>
          </a><div>
    <h3>Quick search</h3>
    <!--Setup by JKWM via https://cse.google.com/cse/all-->
    <script async src="https://cse.google.com/cse.js?cx=243e6cd4be08b404b">
    </script>
    <div class="gcse-search"></div>
 </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../hpc/index.html">Using the HPC Systems</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Stanage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../stanage-FAQ-gotchas.html">Stanage FAQ and Gotchas</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Software on Stanage</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../apps/index.html">Applications on Stanage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../development/index.html">Developing on Stanage</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Libraries on Stanage</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="PETSc.html">PETSc</a></li>
<li class="toctree-l4"><a class="reference internal" href="blas.html">BLAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="boost.html">Boost C++ Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="cfitsio.html">cfitsio</a></li>
<li class="toctree-l4"><a class="reference internal" href="cuda.html">CUDA</a></li>
<li class="toctree-l4"><a class="reference internal" href="cudnn.html">cuDNN</a></li>
<li class="toctree-l4"><a class="reference internal" href="fftw.html">fftw</a></li>
<li class="toctree-l4"><a class="reference internal" href="gdal.html">Geospatial Data Abstraction Library (GDAL)</a></li>
<li class="toctree-l4"><a class="reference internal" href="geos.html">geos</a></li>
<li class="toctree-l4"><a class="reference internal" href="gsl.html">GSL</a></li>
<li class="toctree-l4"><a class="reference internal" href="hdf5.html">HDF5</a></li>
<li class="toctree-l4"><a class="reference internal" href="imkl.html">Intel MKL</a></li>
<li class="toctree-l4"><a class="reference internal" href="libsndfile.html">libsndfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="libunistring.html">libunistring</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">NAG Fortran and C Library</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l5"><a class="reference internal" href="#running-nag-s-example-programs">Running NAG’s example programs</a></li>
<li class="toctree-l5"><a class="reference internal" href="#installation-notes">Installation notes</a></li>
<li class="toctree-l5"><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="netcdf.html">netCDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="nlopt.html">NLopt</a></li>
<li class="toctree-l4"><a class="reference internal" href="openblas.html">OpenBLAS</a></li>
<li class="toctree-l4"><a class="reference internal" href="proj.html">PROJ</a></li>
<li class="toctree-l4"><a class="reference internal" href="scalapack.html">ScaLAPACK</a></li>
<li class="toctree-l4"><a class="reference internal" href="udunits.html">udunits</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../parallel/index.html">Parallel Systems on Stanage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cluster_specs.html">Stanage Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../slurm.html">Slurm Scheduler Job Submission info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../stanage-mfa-setup.html">Stanage TOTP multifactor authentication setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../GPUComputingStanage.html">Using GPUs on Stanage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../bessemer/index.html">Bessemer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parallel/index.html">Parallel Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../newsletter/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary of Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../other-uk-hpc-resources.html">Access to External UK HPC Facilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../help.html">Need help?</a></li>
<li class="toctree-l1"><a class="reference external" href="https://rcgsheffield.github.io/TUoS-RIT-training-resources/training.html">Courses / Training Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cheatsheets/index.html">Quick Reference (Cheat Sheets)</a></li>
<li class="toctree-l1"><a class="reference external" href="http://changelog.hpc.shef.ac.uk/">Latest Software / HPC changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../referenceinfo/index.html">Reference Information Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../citing.html">Suggested text for citations and letters of support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../decommissioned/index.html">Decommissioned Clusters</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Sheffield HPC Documentation</a>
      </nav>

      <div class="wy-nav-content">
<!-- <a class="forkme" href="https://github.com/rcgsheffield/sheffield_hpc">
<img alt="Fork me on GitHub" src="../../../_static/img/forkme.png"> 
</a> -->

        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Stanage</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Software on Stanage</a></li>
          <li class="breadcrumb-item"><a href="index.html">Libraries on Stanage</a></li>
      <li class="breadcrumb-item active">NAG Fortran and C Library</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nag-fortran-and-c-library">
<span id="nag-stanage"></span><h1>NAG Fortran and C Library<a class="headerlink" href="#nag-fortran-and-c-library" title="Link to this heading"></a></h1>
<aside class="sidebar">
<p class="sidebar-title">nag</p>
<dl class="field-list simple">
<dt class="field-odd">Version<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mark 30.0.0</p>
</dd>
<dt class="field-even">URL<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://nag.com/nag-library/">https://nag.com/nag-library/</a></p>
</dd>
</dl>
</aside>
<p>The NAG Library is a comprehensive collection of routines for the solution of numerical and statistical problems.
The Library consists of a number of generic interfaces:</p>
<ul class="simple">
<li><p>the FL interface, a standard set of interfaces that utilise only simple types
which makes them suitable for calling from a wide range of languages,
including Fortran (NAG’s traditional Fortran Library interfaces), C, C++, VBA and others;</p></li>
<li><p>the CL Interface, NAG’s traditional set of C Library interfaces;</p></li>
<li><p>the NAG AD Library interfaces to support Algorithmic Differentiation.</p></li>
</ul>
<p>In addition to these generic interfaces,
NAG supports interfaces tailored to specific environments and programming languages,
including Python, Java, .NET and MATLAB.</p>
<hr class="docutils" />
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>To make this library available, run the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">NAG</span><span class="o">/</span><span class="n">nll6i30dbl</span>
</pre></div>
</div>
<p>This also activates the intel compiler iccifort/2019.5.281</p>
<hr class="docutils" />
<p>You can now compile a Fortran program so it is linked against the NAG library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ifort</span> <span class="n">your_code</span><span class="o">.</span><span class="n">f90</span> <span class="o">-</span><span class="n">lnag_mkl</span> <span class="o">-</span><span class="n">o</span> <span class="n">your_code</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<p>which links to a version of the NAG library that’s linked against the high performance Intel MKL.
This in turn provides high-performance versions of the BLAS and LAPACK libraries.</p>
<p>Alternatively, you can compile using</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ifort</span> <span class="n">your_code</span><span class="o">.</span><span class="n">f90</span> <span class="o">-</span><span class="n">lnag_nag</span> <span class="o">-</span><span class="n">o</span> <span class="n">your_code</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<p>which is linked against a reference version of BLAS and LAPACK.</p>
<p>If you are in any doubt as to which to choose, we suggest that you use <code class="docutils literal notranslate"><span class="pre">-lnag_mkl</span></code></p>
</section>
<hr class="docutils" />
<section id="running-nag-s-example-programs">
<h2>Running NAG’s example programs<a class="headerlink" href="#running-nag-s-example-programs" title="Link to this heading"></a></h2>
<p>Most of NAG’s routines come with example programs that show how to use them.
When you use the <code class="docutils literal notranslate"><span class="pre">module</span></code> command to load a version of the NAG library,
the script <code class="docutils literal notranslate"><span class="pre">nag_example</span></code> for that version becomes available.
Providing this script with the name of the NAG routine you are interested in
will copy, compile and run the example program for that routine
in your current working directory.</p>
<p>For example, here is an example output for the NAG routine <code class="docutils literal notranslate"><span class="pre">a00aaf</span></code>
which identifies the version of the NAG library you are using.
If you try this yourself, the output you get will vary according to which version of the NAG library you are using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">testapps</span><span class="o">/</span><span class="n">el7</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">staging</span><span class="o">/</span><span class="n">NAG</span><span class="o">/</span><span class="n">nll6i30dbl</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">nag_example</span> <span class="n">a00aaf</span>
</pre></div>
</div>
<p>If you have loaded the <code class="docutils literal notranslate"><span class="pre">module</span></code> for nll6i30dbl this will give the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Use</span> <span class="n">nagvars</span> <span class="n">script</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">NAG</span> <span class="nb">compile</span> <span class="ow">and</span> <span class="n">link</span> <span class="n">environment</span>
<span class="n">variables</span> <span class="n">within</span> <span class="n">nag_example</span> <span class="n">script</span>
<span class="o">.</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">testapps</span><span class="o">/</span><span class="n">el7</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">staging</span><span class="o">/</span><span class="n">NAG</span><span class="o">/</span><span class="n">nll6i30dbl</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">nagvars</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">quiet</span>  <span class="n">int32</span> <span class="n">static</span> <span class="n">nag</span>

<span class="n">Copying</span> <span class="n">a00aafe</span><span class="o">.</span><span class="n">f90</span> <span class="n">to</span> <span class="n">current</span> <span class="n">directory</span>
<span class="n">cp</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">testapps</span><span class="o">/</span><span class="n">el7</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">staging</span><span class="o">/</span><span class="n">NAG</span><span class="o">/</span><span class="n">nll6i30dbl</span><span class="o">/</span><span class="n">f_examples</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">a00aafe</span><span class="o">.</span><span class="n">f90</span> <span class="o">.</span>

<span class="n">Compiling</span> <span class="ow">and</span> <span class="n">linking</span> <span class="n">a00aafe</span><span class="o">.</span><span class="n">f90</span> <span class="n">to</span> <span class="n">produce</span> <span class="n">executable</span> <span class="n">a00aafe</span><span class="o">.</span><span class="n">exe</span>
<span class="n">ifort</span>  <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">testapps</span><span class="o">/</span><span class="n">el7</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">staging</span><span class="o">/</span><span class="n">NAG</span><span class="o">/</span><span class="n">nll6i30dbl</span><span class="o">/</span><span class="n">lp64</span><span class="o">/</span><span class="n">nag_interface_blocks</span> <span class="n">a00aafe</span><span class="o">.</span><span class="n">f90</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">testapps</span><span class="o">/</span><span class="n">el7</span><span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">staging</span><span class="o">/</span><span class="n">NAG</span><span class="o">/</span><span class="n">nll6i30dbl</span><span class="o">/</span><span class="n">lp64</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libnag_nag</span><span class="o">.</span><span class="n">a</span> <span class="o">-</span><span class="n">lm</span> <span class="o">-</span><span class="n">ldl</span> <span class="o">-</span><span class="n">lstdc</span><span class="o">++</span> <span class="o">-</span><span class="n">o</span> <span class="n">a00aafe</span><span class="o">.</span><span class="n">exe</span>

<span class="n">Running</span> <span class="n">a00aafe</span><span class="o">.</span><span class="n">exe</span>
<span class="o">./</span><span class="n">a00aafe</span><span class="o">.</span><span class="n">exe</span> <span class="o">&gt;</span> <span class="n">a00aafe</span><span class="o">.</span><span class="n">r</span>
 <span class="n">A00AAF</span> <span class="n">Example</span> <span class="n">Program</span> <span class="n">Results</span>

 <span class="o">***</span> <span class="n">Start</span> <span class="n">of</span> <span class="n">NAG</span> <span class="n">Library</span> <span class="n">implementation</span> <span class="n">details</span> <span class="o">***</span>

 <span class="n">Implementation</span> <span class="n">title</span><span class="p">:</span> <span class="n">Linux</span><span class="p">,</span> <span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span> <span class="n">Intel</span> <span class="n">Classic</span> <span class="n">C</span><span class="o">/</span><span class="n">C</span><span class="o">++</span> <span class="ow">or</span> <span class="n">Intel</span> <span class="n">Classic</span> <span class="n">Fortran</span>
            <span class="n">Precision</span><span class="p">:</span> <span class="n">double</span> <span class="n">precision</span>
         <span class="n">Product</span> <span class="n">Code</span><span class="p">:</span> <span class="n">NLL6I30DBL</span>
                 <span class="n">Mark</span><span class="p">:</span> <span class="mf">30.0.0</span> <span class="p">(</span><span class="bp">self</span><span class="o">-</span><span class="n">contained</span><span class="p">)</span>

  <span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="mi">64</span><span class="o">-</span><span class="n">bit</span> <span class="n">library</span> <span class="n">using</span> <span class="mi">32</span><span class="o">-</span><span class="n">bit</span> <span class="n">integers</span><span class="o">.</span>

 <span class="o">***</span> <span class="n">End</span> <span class="n">of</span> <span class="n">NAG</span> <span class="n">Library</span> <span class="n">implementation</span> <span class="n">details</span> <span class="o">***</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="installation-notes">
<h2>Installation notes<a class="headerlink" href="#installation-notes" title="Link to this heading"></a></h2>
<p>This section is primarily for administrators of the system:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PRODUCT</span><span class="o">=</span><span class="s1">&#39;nll6i30dbl&#39;</span>
<span class="nb">pushd</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TMPDIR</span><span class="p">-/tmp</span><span class="si">}</span><span class="s2">&quot;</span>
wget<span class="w"> </span><span class="s2">&quot;https://www.nag.co.uk/downloads/impl/</span><span class="si">${</span><span class="nv">PRODUCT</span><span class="si">}</span><span class="s2">.tgz&quot;</span>
tar<span class="w"> </span>-xvzf<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PRODUCT</span><span class="si">}</span><span class="s2">.tgz&quot;</span>
<span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PRODUCT</span><span class="s2">&quot;</span>
./install.sh<span class="w"> </span>-silent<span class="w"> </span>-accept-installdir<span class="o">=</span>/opt/apps/testapps/el7/software/staging/NAG
</pre></div>
</div>
<p>The module file is <a class="reference download internal" download="" href="../../../_downloads/f12704f238d86a3ff8693f5be1b4bf15/nll6i30dbl.lua"><code class="xref download docutils literal notranslate"><span class="pre">/opt/apps/testapps/el7/modules/staging/all/NAG/nll6i30dbl.lua</span></code></a>.</p>
</section>
<hr class="docutils" />
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Link to this heading"></a></h2>
<p>Run an example program (as detailed above). The run_example copies the relevant Fortran code file &amp; associated data, compiles &amp; executes the test. Note: the example code contains a function call to the relevant pre-built NAG library function.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="libunistring.html" class="btn btn-neutral float-left" title="libunistring" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="netcdf.html" class="btn btn-neutral float-right" title="netCDF" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, The University of Sheffield.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<footer class="footer">
  <div class="container">
    <div class="left-footer">
         &copy; 2024, The University of Sheffield
       <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a>
    </div>
   
    <div class="centre-footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7
    </div>
  </div>
</footer>

</body>
</html>